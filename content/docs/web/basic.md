+++
title = 'サイト構築基本'
date = 2024-04-20T23:50:40+09:00
draft = false
+++

## Webブラウザ
WebページはHTMLファイル(以下の例はhello.html)をWebブラウザで読み込むことで表示される。

```
<html>
    <head>
        <title>はじめてのWebサイト</title>
    </head>
    <body>こんにちは、世界の読者へ</body>
</html>
```
![Webブラウザ](/images/web-browser.png)  

## Webサーバー
これをWebサーバーと呼ばれるソフトゥエアが参照している指定のフォルダに置くと同じネットワーク内（家庭や職場などのLAN(LocalAreaNetwork)）からWebサイトを見ることができる。サーバーとはサービスを配るものという意味である。

```
hoge@web-server:/var/www/html$ ls hello.html
hello.html
hoge@web-server:/var/www/html$ ifconfig | grep inet
        inet 192.168.0.101  netmask 255.255.255.0  broadcast 192.168.0.255
```
![ローカルWebサーバー](/images/local-web-server.png)  

### index.html
なお、HTMLファイル名がindex.htmlの場合、Webサーバー上のファイル名を指定しなくても、Webブラウザーはindex.htmlを読み込むというルールがある。
```
hoge@web-server:/var/www/html$ mv hello.html index.html
hoge@web-server:/var/www/html$ ls index.html
index.html
```
![ローカルWebサーバーIndex](/images/local-web-server-index.png)

## インターネット
これを全世界に公開するためには、Webサーバーがつながっているルーター等のWAN(WideAreaNetwork)側のポートを空ける必要がある。なお、通信は必ずクライアント（ここではWebブラウザ）からサーバーに対する要求とそれに対する応答という形で行われる。
![インターネット](/images/internet.png)

### IPアドレス
IPアドレスとはネットワーク上の住所を示すもので、それぞれの機器に振られる。
上図の場合の例として以下抜粋する。
|機器|IPアドレス|
|:---|:---|
|LAN1|192.168.0.1|
|PC1|192.168.0.101|
|PC2|192.168.0.102|
|WAN1|172.217.26.227|
|LAN2|192.168.10.1|
|タブレット|192.168.10.3|

### ポート
ポートとはアプリケーションがその番号で通信することによって混信しないようにするためのものである。
実は通信データはテレビの電波のように多くのチャンネルが一斉に送信してくるが、IPアドレスとポート番号を指定することで、チャンネル合わせをするかのように指定のものを受け取っているのである。

なお、httpとはHyperTextTransferProtocolの略でデフォルトでは80番のポートを空ける必要がある。 `http://172.217.26.227:80/`  
その場合、ポート番号は省略できる。`http://172.217.26.227`  
80番以外でも通信できるが、その場合はポート番号を必ず指定しないとならない。`http://172.217.26.227:8080/`  

### ドメイン
IPアドレスは運営側の事情によって変わりうるのと人間的に分かりにくいのでドメイン（`google.co.jp`など）と呼ばれる名前をつけて人間に分かりやすいようにしている。

![ドメイン](/images/domain.png)

#### ドメイン取得
そのためには、まずレジストラと呼ばれるサービス提供会社にお金を払ってドメインを取得する必要がある。
なぜ、お金を払う必要があるかというと、本来ドメインは無料なのであるが、早い者勝ちとなる。
`.jp`などのトップドメインは国が管理していてどうしようもないのだが、`google.co`などは欲しい人がいるため、レジストラという業者が無料でドメインを取得したあと有料で販売するからである。

#### DNS(Domain Name Service)
ドメインを取得したあと、DNSサーバー運営会社にて設定を行い、自身が管理しているサーバーのWAN側のIPアドレスに紐づける。もちろん内部でLAN側にこれを紐づけるのはサーバー管理者が行う。
|ドメイン|WAN側IPアドレス|LAN側IPアドレス|
|:---|:---|:---|
|www.google.co.jp|172.217.26.227:80|192.168.0.101:80|

DNSというのは"Domain Name Service"の略で、このサービスをしている会社は無料でサービスを提供してくれているものが多い。
そして、上図のようにクライアントがまずDNSサーバーに対して名前解決（IPアドレスとドメインの紐付け）を行ってから、サーバーに要求を行い処理を完結させる。  
なお、`www`はサブドメインと呼ばれ、サーバー管理者が自由に名前をつけて自由にDNSサーバーに登録することができる。